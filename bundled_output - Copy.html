<!DOCTYPE html>
<html lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shipping Form</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* General reset and box-sizing rules */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background-color: #f9f9f9;
        }

        .container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            width: 80%;
            margin: 10px auto;
            padding: 50px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .shipping-section, .summary-section {
            width: 100%;
            padding: 10px;
        }

        /* Ensuring all form fields are properly aligned and centered */
        .shipping-section select,
        .shipping-section input[type="text"],
        .shipping-section textarea {
            margin-bottom: 10px;
            width: 80%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        /* Ensure all text areas are vertically resizable only */
        textarea {
            resize: vertical;
            min-height: 50px;
        }

        .border-box {
            border: 1px solid #053856;
            padding: 15px;
            margin-bottom: 30px;
            border-radius: 8px;
        }

        .step-separator {
            flex: 1;
            height: 1px;
            background-color: #053856;
            margin: 0 1px;
            position: center;
            margin-top: -31px;
        }

        .step-label {
            position: absolute;
            text-align: center;
            margin-left: 90px;
            width: 100px;
            font-size: 10px;
            top: 35px;
        }

        /* Adjustments for the form body */
        .form-body {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }

        /* Horizontal centering and proper layout for form details */
        .shipping-detail {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            margin: 0 auto;
            padding: 20px;
        }

        /* Styling for radio buttons and their labels */
        .shipping-options label {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }

        .shipping-options input[type="radio"] {
            margin-right: 10px;
        }

        /* Styling for address search */
        .address-search {
            margin-top: 20px;
            margin-bottom: 20px;
            position: relative;
            width: 100%;
        }

        #search-address {
            width: 180px;
            padding-right: 40px;
        }

        #search-button {
            position: absolute;
            top: 30%;
            left: 155px;
            transform: translateY(-45%);
            font-size: 15px;
            cursor: pointer;
            color: #053856;
        }

        .grid-3-columns {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 10px;
        }

        .address-option {
            min-width: 160px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #ffffff;
            font-size: 12px;
            text-align: center;
        }

        .add-address-option {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #ffffff;
            font-size: 12px;
            text-align: center;
        }

        .address-option input {
            margin-bottom: 5px;
        }

        .edit-btn {
            padding: 5px;
            border: none;
            background-color: #053856;
            color: white;
            cursor: pointer;
            margin-top: 60px;
            align-self: center;
            width: 50%;
        }

        #add-new-address {
            padding: 40px;
            border: 1px dashed #1a73e8;
            color: #1a73e8;
            background-color: white;
            text-align: center;
            cursor: pointer;
            width: 100%;
        }

        .summary-content p {
            margin-bottom: 5px;
        }

        .summary-content p span {
            float: right;
        }

        .cart-item {
            padding: 10px 0;
            border-bottom: 1px solid #053856;
        }

        .edit-cart {
            float: right;
            font-size: 12px;
            color: #1a73e8;
        }

        .form-footer {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 20px;
            padding: 20px;
            width: 100%;
        }

        ::placeholder {
            color: #999;
            opacity: 1;
        }

        .tab-container {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .tab-button {
            padding: 10px 20px;
            border: 1px solid #ccc;
            background-color: #f1f1f1;
            cursor: pointer;
            margin: 0 5px;
        }

        .tab-button.active {
            background-color: #053856;
            color: white;
        }

        .tab-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        .tab-content input {
            width: 80%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .continue-btn {
            width: auto;
            min-width: 150px;
            padding: 10px 20px;
            background-color: #053856;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
        }

        #place-order-btn {
            display: none;
        }

        /* Modal Styling */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .modal:target {
            display: flex;
        }

        .modal-content {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            width: 400px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            animation: modal-entry 0.3s ease-out;
        }

        @keyframes modal-entry {
            0% {
                transform: scale(0.95);
                opacity: 0;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .modal-close {
            display: block;
            text-align: right;
            margin-bottom: 10px;
        }

        .modal-close a {
            text-decoration: none;
            color: #053856;
            font-weight: bold;
            font-size: 14px;
        }

        .modal-buttons {
            margin-top: 20px;
            width: 100%;
            display: flex;
            justify-content: space-between;
        }

        .modal-btn {
            padding: 10px 20px;
            background-color: #053856;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .address-container {
                flex-direction: column;
            }
        }

.cancel-btn {
    padding: 10px 20px;
    background-color: #053856;
    color: white;
    text-decoration: none;
    border-radius: 4px;
    cursor: pointer;
    display: inline-block;
    min-width: 150px; /* Match the minimum width of the continue button */
    text-align: center;
}

.cancel-btn:hover {
    background-color: #CF2E2E;
}

.continue-btn {
    padding: 10px 20px;
    background-color: #053856;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

        .step-number.active {
            background-color: #053856;
            color: white;
        }

        .step-number.inactive {
            background-color: white;
            color: #053856;
            border: 2px solid #053856;
        }



        .terms-modal-wrapper {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }
        
        .terms-modal-wrapper:target {
            display: flex;
        }
        
        .terms-modal-content {
            background-color: #fff;
            max-height: 100%;
            padding: 20px;
            border-radius: 8px;
            width: 700px;
            overflow-y: auto;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .terms-modal-content::-webkit-scrollbar {
            width: 8px;
        }

        .terms-modal-content::-webkit-scrollbar-thumb {
            background-color: #053856; /* Modern colored scrollbar thumb */
            border-radius: 10px;
        }

        .terms-modal-content::-webkit-scrollbar-track {
            background: transparent; /* Invisible scrollbar track */
        }

        
        .terms-modal-close {
            display: block;
            text-align: right;
            margin-bottom: 10px;
        }
        
        .terms-modal-close a {
            text-decoration: none;
            color: #053856;
            font-weight: bold;
            font-size: 14px;
        }

        /* Modal buttons */
        .terms-modal-footer {
            margin-top: 20px;
        }

        .terms-modal-footer button {
            padding: 10px 20px;
            background-color: #053856;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        /* Accordion styling */
        .terms-accordion-input {
            display: none;
        }

        .terms-accordion-label {
            display: block;
            padding: 8px;
            background-color: #053856;
            color: white;
            cursor: pointer;
            border-radius: 5px;
            margin-bottom: 5px;
            font-size: 12px;
        }

        .terms-accordion-label:hover {
            background-color: #53819D;
        }

        .terms-accordion-content {
            display: none;
            padding: 10px;
            background-color: #f1f1f1;
            border-radius: 5px;
            margin-bottom: 10px;
            font-size: 12px;
        }

        .terms-accordion-input:checked + .terms-accordion-label + .terms-accordion-content {
            display: block;
        }

        /* Style for bullet points and list items */
        .terms-accordion-content ul {
            list-style-type: disc;
            padding-left: 20px; /* Add padding for list items */
            margin: 10px 0;
        }

        .terms-accordion-content li {
            margin-bottom: 10px; /* Add space between each bullet point */
            line-height: 1.5; /* Increase line height for better readability */
            text-align: left; /* Align text to the left for a clean look */
        }

        .terms-accordion-content strong {
            font-weight: bold;
        }

        .new-address-form {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            width: 100%;
        }
        
        
        .new-address-form input {
            height: 35px;
            width: 100%;
            padding: 12px;
            font-size: 14px;
            border: 1px solid #ccc;
            border-radius: 2px;
            transition: border-color 0.3s ease;
        }

        .new-address-form input:focus {
            border-color: #1a73e8;
            outline: none;
        }

        
        .city-state-zipcode {
            display: flex;
            gap: 10px;
            width: 100%;
        }

        .city-state-zipcode input {
            flex: 1;
            min-width: 0;
        }


        #address-suggestions {
            position: absolute;
            background-color: white;
            border: 1px solid #ccc;
            max-height: 150px;
            overflow-y: auto;
            width: 100%;
            z-index: 1000;
            border-radius: 4px;
        }

        .suggestion {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #e0e0e0;
        }

        .suggestion:hover {
            background-color: #f1f1f1;
        }
        #order-confirmation {
            display: none; /* Initially hidden */
            text-align: center;
            padding: 50px;
        }

        #order-confirmation h2 {
            color: #053856;
            margin-bottom: 20px;
        }

        #order-confirmation p {
            font-size: 18px;
            margin-bottom: 20px;
        }

        #order-confirmation button {
            padding: 10px 20px;
            background-color: #053856;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        #order-confirmation button:hover {
            background-color: #1a73e8;
        }

    </style>
</head>
<body>

<div class="container">
    <!-- Shipping Section -->
    <div class="shipping-section border-box">
        <div class="form-header">
            <div class="step-indicator">
                <span class="step-number active" id="step-1">1</span>
                <span class="step-separator"></span>
                <span class="step-number inactive" id="step-2">2</span>
                <span class="step-separator"></span>
                <span class="step-number inactive" id="step-3">3</span>
            </div>
        </div>

        <div class="form-body">
            <!-- Initial Shipping Section -->
            <div id="initial-shipping-section">
                <div class="shipping-address">
                    <h3>Select Shipping</h3>
                    <select id="shipping-method" aria-label="Select Shipping Method">
                        <option value="">-Select-</option>
                        <option value="ship-to-me">Ship to Me</option>
                        <option value="pickup-evansville-in" disabled>Pickup Evansville, IN</option>
                        <option value="pickup-bloomington-in" disabled>Pickup Bloomington, IN</option>
                        <option value="pickup-dubois-il" disabled>Pickup Dubois, IL</option>
                        <option value="pickup-henderson-ky" disabled>Pickup Henderson, KY</option>
                        <option value="pickup-hopkinsville-ky" disabled>Pickup Hopkinsville, KY</option>
                        <option value="pickup-indianapolis-in" disabled>Pickup Indianapolis, IN</option>
                        <option value="pickup-jasper-in" disabled>Pickup Jasper, IN</option>
                        <option value="pickup-madisonville-ky" disabled>Pickup Madisonville, KY</option>
                        <option value="pickup-owensboro-ky" disabled>Pickup Owensboro, KY</option>
                       <option value="pickup-vincennes-in" disabled>Pickup Vincennes, IN</option>
                    </select>



                    <div class="address-search">
                        <input type="text" id="search-address" placeholder="Enter name, address, city" aria-label="Search Address">
                        <span id="search-button">üîç</span>
                    </div>

                    <h5>Select Billing Address</h5>

                    <div class="address-list grid-3-columns">
                        <div class="add-address-option">
                            <button id="add-new-address">+ Add New Address</button>
                        </div>
                        <div class="address-option">
                            <input type="radio" id="address1" name="address" checked aria-label="Select Address">
                            <label for="address1">3976 SOUTHERN AVE <br> CINCINNATI, OH 45227</label>
                            <button class="edit-btn" aria-label="Edit Address">Edit</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Shipping Options (Initially Hidden) -->
            <div id="shipping-options" style="display: none;">
                <label>
                    <input type="radio" name="shipping-type" value="prepay" checked aria-label="Prepay and Add">
                    Prepay & Add
                </label>
                <label>
                    <input type="radio" name="shipping-type" value="collect" aria-label="Collect">
                    Collect
                </label>
                <label>
                    <input type="radio" name="shipping-type" value="ltl" aria-label="LTL Collect">
                    LTL Collect
                </label>

                <!-- Prepay & Add Options -->
                <div id="prepay-options" class="shipping-detail">
                    <select id="ups-options" aria-label="Select UPS Shipping Service">
                        <option value="">Select UPS Shipping Service *</option>
                        <option value="ground">Ground</option>
                        <option value="next-day">Next Day Air</option>
                        <option value="second-day">2nd Day Air</option>
                    </select>

                    <div class="shipping-instructions-notes">
                        <textarea id="prepay-order-notes" placeholder="Order Notes"></textarea>
                    </div>
                        <p style="color: red; text-align: center;">UPS ONLY</p>
                </div>




                <!-- Collect Options -->
                <div id="collect-options" class="shipping-detail" style="display: none;">
                    <select id="collect-shipping-method" aria-label="Select Collect Shipping Service">
                        <option value="">Select UPS Shipping Service *</option>
                        <option value="ground">Ground</option>
                        <option value="next-day">Next Day Air</option>
                        <option value="second-day">2nd Day Air</option>
                    </select>

                    <input type="text" id="ups-account" placeholder="UPS Account Number *" aria-label="UPS Account Number">
                    <input type="text" id="contact-name" placeholder="Contact Name *" aria-label="Contact Name">
                    <input type="text" id="contact-number" placeholder="Phone Number *" aria-label="Phone Number">

                    <div class="shipping-instructions-notes">
                        <textarea id="collect-order-notes" placeholder="Order Notes"></textarea>
                    </div>
                        <p style="color: red; text-align: center;">UPS ONLY</p>
                </div>

                <!-- LTL Collect Options -->
                <div id="ltl-options" class="shipping-detail" style="display: none;">
                    <select id="courier-name" aria-label="Select Courier Name">
                        <option value="" disabled selected>Select Courier Name *</option>
                        <option value="dayton">Dayton</option>
                        <option value="fedex-freight">FedEx Freight</option>
                        <option value="old-dominion">Old Dominion</option>
                        <option value="rl">R&L</option>
                        <option value="tforce">TForce</option>
                        <option value="xpo">XPO</option>
                    </select>

                    <input type="text" id="courier-account" placeholder="Courier Account Number *" aria-label="Courier Account Number">
                    <input type="text" id="courier-fullname" placeholder="Contact Name *" aria-label="Contact Name">
                    <input type="text" id="courier-contact" placeholder="Phone Number *" aria-label="Phone Number">

                    <div class="shipping-instructions-notes">
                        <textarea id="ltl-order-notes" placeholder="Order Notes"></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Payment Section -->
        <div id="payment-section" style="display: none;">
            <div class="tab-container">
                <button class="tab-button active" id="tab-purchase-order">Purchase Order</button>
                <button class="tab-button" id="tab-credit-card">Credit Card Payment</button>
            </div>

            <!-- Purchase Order Form -->
            <div id="purchase-order-form" class="tab-content">
                <input type="text" id="purchase-order-number" placeholder="Purchase Order# *" required>
                <input type="text" id="ordered-by" placeholder="Ordered By *" required>
                <input type="date" id="required-by-date" placeholder="Required by Date *" required>
                <p>Note: Tax and Freight will be finalized at the time of shipping.</p>
            </div>

            <!-- Credit Card Form -->
            <div id="credit-card-form" class="tab-content" style="display: none;">
                <input type="text" id="card-number" placeholder="Purchase Order#" >
                <input type="text" id="card-number" placeholder="Card Number" required>
                <input type="text" id="expiration-date" placeholder="Expiration Date MM/YY" required>
                <input type="text" id="card-holder-name" placeholder="Card Holder Name" required>
                <input type="text" id="cvv" placeholder="CVV" required>
                <p>Note: Tax and Freight will be finalized at the time of shipping.</p>
            </div>

            <p>
                By clicking the 'Place Order' button, you confirm that you have read, understood,
                and accept our <a href="https://www.tristate-bearing.com/terms-and-conditions" target="_blank">Terms and Conditions of Sale and Returns Policy</a>.
                I understand that my order cannot be modified once it is placed.
            </p>



            <div class="form-footer">
                <button id="place-order-btn" class="continue-btn">PLACE ORDER</button>
            </div>
        </div>

        <div class="form-footer">
            <button id="back-btn" class="continue-btn">PREVIOUS</button>
            <button id="single-continue-btn" class="continue-btn">CONTINUE</button>
        </div>
    </div>

    <!-- Summary Section -->
    <div class="summary-section">
        <div class="address-container">
            <div class="billing-address border-box">
                <h4>Billing Address</h4>
                <div class="billing-content">
                    <p>DEBRA-KUEMPEL</p>
                    <p>3976 SOUTHERN AVE</p>
                    <p>CINCINNATI, OH 45227</p>
                </div>
            </div>

            <div class="shipping-address border-box">
                <h4>Shipping Address</h4>
                <div class="shipping-content"></div>
            </div>
        </div>

        <div class="order-summary border-box">
            <h4>Summary</h4>
            <div class="summary-content">
                <p>Subtotal: <span>$40.72</span></p>
                <p>Shipping: <span id="shipping-cost">TBD</span></p>
                <p>Tax: <span>TBD</span></p>
                <p>Total: <span>TBD</span></p>
            </div>
        </div>

        <div class="cart-items border-box">
            <h4>In Your Cart (2) <a href="#" class="edit-cart">Edit Cart</a></h4>
            <div class="cart-item">
                <p>Timken¬Æ 800354 NAT800354</p>
                <p>800000 Style V-Seal, $24.78</p>
            </div>
            <div class="cart-item">
                <p>NTN 6203LLBC3/EM NTN6203LL</p>
                <p>Bearing, $15.94</p>
            </div>
        </div>
    </div>
</div>

<!-- The Modal (moved outside the container) -->
<div id="terms-modal" class="modal terms-modal-wrapper">
    <div class="terms-modal-content">
        <div class="terms-modal-close">
            <!-- Close the modal by linking back to the top of the page -->
            <a href="#">‚úñ</a>
        </div>
        <h2>Terms and Conditions</h2>

        <!-- Accordion for Terms and Conditions -->
        <div class="terms-accordion">
            <!-- First Accordion Item -->
            <input type="radio" id="accordion-1" name="accordion" class="terms-accordion-input" checked>
            <label for="accordion-1" class="terms-accordion-label"><strong>Use of Website</strong></label>
            <div class="terms-accordion-content">
                <p>The content on this website is for informational purposes only. We reserve the right to update, modify, or remove content without prior notice.</p>
            </div>

            <!-- Second Accordion Item -->
            <input type="radio" id="accordion-2" name="accordion" class="terms-accordion-input">
            <label for="accordion-2" class="terms-accordion-label"><strong>Intellectual Property</strong></label>
            <div class="terms-accordion-content">
                <p>All intellectual property on this website, including text, images, and graphics, are owned by or licensed to us. Unauthorized use or reproduction of content is prohibited.</p>
            </div>

            <!-- Third Accordion Item -->
            <input type="radio" id="accordion-3" name="accordion" class="terms-accordion-input">
            <label for="accordion-3" class="terms-accordion-label"><strong>Privacy Policy</strong></label>
            <div class="terms-accordion-content">
                <p>Your personal information is handled in accordance with our Privacy Policy. We take your privacy seriously and ensure that your data is protected.</p>
            </div>

            <!-- Fourth Accordion Item -->
            <input type="radio" id="accordion-4" name="accordion" class="terms-accordion-input">
            <label for="accordion-4" class="terms-accordion-label"><strong>Liability</strong></label>
            <div class="terms-accordion-content">
                <p>We are not liable for any damages or losses arising from the use or inability to use our website. This includes but is not limited to service interruptions or inaccuracies in the information provided.</p>
            </div>

            <!-- Fifth Accordion Item -->
            <input type="radio" id="accordion-5" name="accordion" class="terms-accordion-input">
            <label for="accordion-5" class="terms-accordion-label"><strong>Governing Law</strong></label>
            <div class="terms-accordion-content">
                <p>These terms are governed by the laws of the jurisdiction in which our company operates.</p>
            </div>

            <!-- Return Policy Accordion -->
            <input type="radio" id="accordion-6" name="accordion" class="terms-accordion-input">
            <label for="accordion-6" class="terms-accordion-label"><strong>Return Policy</strong></label>
            <div class="terms-accordion-content">
                <p>We aim to provide high-quality products and services. If you are not completely satisfied with your purchase, please review our return policy below:</p>
                <ul>
                    <li><strong>Eligibility for Returns:</strong> Products can be returned within 30 days of receipt. To be eligible for a return, items must be in the same condition that you received them.</li>
                    <li><strong>Non-Returnable Items:</strong> Certain items are non-returnable, including customized products and any item not in its original condition.</li>
                    <li><strong>Refunds:</strong> If approved, your refund will be processed, and a credit will automatically be applied to your original method of payment within a specified number of days.</li>
                    <li><strong>Shipping Costs:</strong> Shipping costs are non-refundable. If you receive a refund, the cost of return shipping will be deducted from your refund unless the item was defective or damaged upon arrival.</li>
                    <li><strong>Exchanges:</strong> If you need to exchange an item, please contact us, and we will provide further instructions.</li>
                </ul>
            </div>
        </div>

        <!-- Modal Footer with Close Button -->
        <div class="terms-modal-footer">
            <a href="#"><button class="continue-btn">OK</button></a>
        </div>
    </div>
</div>

<!-- Modals -->
<div id="address-confirmation-modal" class="modal">
    <div class="modal-content">
        <h3>Is Shipping Address the same as the Billing Address?</h3>
        <div class="modal-buttons">
            <button id="confirm-yes" class="modal-btn">Yes</button>
            <button id="confirm-no" class="modal-btn">No</button>
        </div>
    </div>
</div>

<div id="new-address-modal" class="modal">
    <div class="modal-content">
        <h3>Enter New Shipping Address</h3>
        <div class="new-address-form">
            <input type="text" id="new-company-name" placeholder="Company Name *" required style="text-transform: uppercase;">
            <div class="address-input-container" style="position: relative; width: 80%;">
                <input type="text" id="new-address-line1" placeholder="Address Line 1 *" required style="text-transform: uppercase;" oninput="fetchAddressSuggestions()">
                <div id="address-suggestions"></div>
            </div>
            <input type="text" id="new-address-line2" placeholder="Address Line 2" style="text-transform: uppercase;">
            <div class="city-state-zipcode">
                <input type="text" id="new-city" placeholder="City *" required style="text-transform: uppercase;">
                <input type="text" id="new-state" placeholder="State *" maxlength="2" required style="text-transform: uppercase;">
                <input type="text" id="new-zipcode" placeholder="Zipcode *" maxlength="5" required>
            </div>
            <!-- Updated Phone Number Input Field -->
            <input type="text" id="new-phone" placeholder="Phone Number *" required style="width: 100%; padding: 12px; font-size: 14px; border: 1px solid #ccc; border-radius: 2px;">
            <button id="submit-new-address-btn" class="continue-btn">Continue</button>
            <a href="" class="cancel-btn">Cancel</a>
        </div>
    </div>
</div>

<script>
const apiKey = 'UlDmrctKtA-knMSuNIJX7EhjvZLt1xquQjA8I2w8SYc';  // Define your API key at the top

document.addEventListener("DOMContentLoaded", function () {
    displayShippingAddressAsBilling();
    toggleShippingOptions();
});

// Search functionality for addresses
document.getElementById('search-button').addEventListener('click', function() {
    const searchQuery = document.getElementById('search-address').value;
    console.log("Searching for: " + searchQuery);
});

// Edit and add new address functionality (placeholders)
document.querySelectorAll('.edit-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        alert('Not Available');
    });
});

document.getElementById('add-new-address').addEventListener('click', () => {
    alert('Not Available');
});

let step = 1; // Track the user's step

// Function to toggle the display of shipping forms based on the selected shipping type
function toggleShippingOptions() {
    const shippingType = document.querySelector('input[name="shipping-type"]:checked').value;
    ['prepay', 'collect', 'ltl'].forEach(type => {
        document.getElementById(`${type}-options`).style.display = (shippingType === type) ? 'flex' : 'none';
    });
}

// Event listeners for shipping type radio buttons
document.querySelectorAll('input[name="shipping-type"]').forEach(radio => {
    radio.addEventListener('change', toggleShippingOptions);
});

// Automatically populate shipping address with billing address on page load
function displayShippingAddressAsBilling() {
    const billingContent = document.querySelector('.billing-content')?.innerHTML.trim();
    if (billingContent) {
        const shippingContent = document.querySelector('.shipping-content');
        shippingContent.innerHTML = billingContent;
        document.querySelector('.shipping-address').style.display = 'block';
    } else {
        console.error("No billing address found to copy to shipping.");
    }
}

// Handle the 'Continue' button click
document.getElementById('single-continue-btn').addEventListener('click', function () {
    if (step === 1) {
        const shippingMethod = document.getElementById('shipping-method').value;
        if (shippingMethod === 'ship-to-me') {
            document.getElementById('address-confirmation-modal').style.display = 'flex';
        } else if (!shippingMethod) {
            alert('Please select a shipping method to continue.');
        } else {
            alert('This option does not require shipping details. Proceeding to the next step.');
            step++;
            updateStepIndicatorUI(step);
            document.getElementById('initial-shipping-section').style.display = 'none';
            document.getElementById('shipping-options').style.display = 'block';
            updateBackButtonVisibility();
        }
    } else if (step === 2) {
        const shippingType = document.querySelector('input[name="shipping-type"]:checked').value;
        if (shippingType) {
            processShippingOptions();
            step++;
            updateStepIndicatorUI(step);
            updateBackButtonVisibility();
        } else {
            alert('Please select a shipping option to continue.');
        }
    }
});

// Function to handle 'BACK' button click
document.getElementById('back-btn').addEventListener('click', function () {
    if (step === 2) {
        step--;
        updateStepIndicatorUI(step);
        document.getElementById('shipping-options').style.display = 'none';
        document.getElementById('initial-shipping-section').style.display = 'block';
    } else if (step === 3) {
        step--;
        updateStepIndicatorUI(step);
        document.getElementById('payment-section').style.display = 'none';
        document.getElementById('shipping-options').style.display = 'block';
        document.getElementById('single-continue-btn').style.display = 'block';
        document.getElementById('place-order-btn').style.display = 'none';
    }
    updateBackButtonVisibility();
});

// Function to handle the address confirmation modal logic
document.getElementById('confirm-yes').addEventListener('click', function () {
    document.getElementById('address-confirmation-modal').style.display = 'none';
    displayShippingAddressAsBilling();
    document.getElementById('initial-shipping-section').style.display = 'none';
    document.getElementById('shipping-options').style.display = 'block';
    step++;
});

document.getElementById('confirm-no').addEventListener('click', function () {
    document.getElementById('address-confirmation-modal').style.display = 'none';
    document.getElementById('new-address-modal').style.display = 'flex';
});

document.getElementById('submit-new-address-btn').addEventListener('click', function () {
    const newAddress = {
        company: document.getElementById('new-company-name').value.toUpperCase(),
        line1: document.getElementById('new-address-line1').value.toUpperCase(),
        line2: document.getElementById('new-address-line2').value.toUpperCase(),
        city: document.getElementById('new-city').value.toUpperCase(),
        state: document.getElementById('new-state').value.toUpperCase(),
        zipcode: document.getElementById('new-zipcode').value,
        phone: document.getElementById('new-phone').value
    };

    displayShippingAddress(newAddress);
    document.getElementById('new-address-modal').style.display = 'none';
    document.getElementById('initial-shipping-section').style.display = 'none';
    document.getElementById('shipping-options').style.display = 'block';
    step++;
});

// Function to display the new shipping address next to the billing address
function displayShippingAddress(newAddress) {
    const shippingAddressHTML = `
        <p><strong>${newAddress.company}</strong></p>
        <p>${newAddress.line1}</p>
        <p>${newAddress.line2 ? newAddress.line2 : ''}</p>
        <p>${newAddress.city}, ${newAddress.state} ${newAddress.zipcode}</p>
        <p>${newAddress.phone}</p>
    `;
    document.querySelector('.shipping-content').innerHTML = shippingAddressHTML;
    document.querySelector('.shipping-address').style.display = 'block';
}

// Function to process shipping options on step 2
function processShippingOptions() {
    const shippingType = document.querySelector('input[name="shipping-type"]:checked').value;
    const shippingCostElement = document.getElementById('shipping-cost');
    const taxElement = document.querySelector('.summary-content p:nth-child(3) span');
    const totalElement = document.querySelector('.summary-content p:nth-child(4) span');

    let shippingCost = '';
    let tax = 'TBD';
    let total = 'TBD';

    if (shippingType === 'prepay') {
        const shippingMethod = document.getElementById('ups-options').value;
        if (!shippingMethod) {
            alert('Please select a shipping method.');
            return;
        }
        shippingCost = '$17.00';
        tax = '$2.44';
        total = '$60.16';
    } else {
        shippingCost = 'Freight billed to your account';
        tax = '$2.44';
        total = '$43.16';
    }

    shippingCostElement.innerText = shippingCost;
    taxElement.innerText = tax;
    totalElement.innerText = total;

    document.getElementById('single-continue-btn').style.display = 'none';
    document.getElementById('place-order-btn').style.display = 'block';
    document.getElementById('shipping-options').style.display = 'none';
    document.getElementById('payment-section').style.display = 'block';
    step++;
}

// Tab switching logic for Payment section
['purchase-order', 'credit-card'].forEach(tab => {
    document.getElementById(`tab-${tab}`).addEventListener('click', function() {
        document.getElementById(`${tab}-form`).style.display = 'flex';
        document.getElementById(tab === 'purchase-order' ? 'credit-card-form' : 'purchase-order-form').style.display = 'none';
        this.classList.add('active');
        document.getElementById(`tab-${tab === 'purchase-order' ? 'credit-card' : 'purchase-order'}`).classList.remove('active');
    });
});

// MM/YY expiration date input
document.getElementById('expiration-date').addEventListener('input', function (e) {
    let input = e.target.value.replace(/\D/g, '');
    if (input.length >= 3) {
        input = `${input.slice(0, 2)}/${input.slice(2, 4)}`;
    }
    e.target.value = input.slice(0, 5);
});

// Format phone numbers and limit zipcode inputs
['contact-number', 'courier-contact', 'new-phone'].forEach(id => {
    document.getElementById(id).addEventListener('input', function() {
        formatPhoneNumber(this);
    });
});

['zipcode', 'courier-zipcode'].forEach(id => {
    document.getElementById(id).addEventListener('input', function() {
        limitZipcode(this);
    });
});

// Utility functions
function formatPhoneNumber(input) {
    let phone = input.value.replace(/\D/g, '');
    if (phone.length > 3 && phone.length <= 6) {
        input.value = `${phone.slice(0, 3)}-${phone.slice(3)}`;
    } else if (phone.length > 6) {
        input.value = `${phone.slice(0, 3)}-${phone.slice(3, 6)}-${phone.slice(6, 10)}`;
    } else {
        input.value = phone;
    }
}

function limitZipcode(input) {
    input.value = input.value.slice(0, 5);
}

// Function to update step circle styles
function updateStepIndicatorUI(currentStep) {
    ['step-1', 'step-2', 'step-3'].forEach(stepId => {
        document.getElementById(stepId).classList.remove('active', 'inactive');
        document.getElementById(stepId).classList.add('inactive');
    });

    if (currentStep === 1) {
        document.getElementById('step-1').classList.add('active');
    } else if (currentStep === 2) {
        document.getElementById('step-1').classList.add('active');
        document.getElementById('step-2').classList.add('active');
    } else if (currentStep === 3) {
        document.getElementById('step-1').classList.add('active');
        document.getElementById('step-2').classList.add('active');
        document.getElementById('step-3').classList.add('active');
    }
}



function fetchAddressSuggestions() {
    const query = document.getElementById('new-address-line1').value;
    if (query.length < 3) {
        document.getElementById('address-suggestions').style.display = 'none'; // Hide suggestions if input is too short
        return;
    }

    // Use the HERE Autocomplete API for better partial address suggestions
    const autocompleteUrl = `https://autocomplete.search.hereapi.com/v1/autocomplete?q=${encodeURIComponent(query)}&in=countryCode:USA&limit=10&apiKey=${apiKey}`;

    fetch(autocompleteUrl)
        .then(response => response.json())
        .then(data => {
            const suggestionsDiv = document.getElementById('address-suggestions');
            suggestionsDiv.innerHTML = ''; // Clear previous suggestions

            if (data.items && data.items.length > 0) {
                suggestionsDiv.style.display = 'block';  // Ensure the suggestion box is visible

                // Prioritize addresses that start with the input
                const filteredItems = data.items.filter(item => {
                    const fullAddress = item.address.label || '';
                    return fullAddress.toLowerCase().startsWith(query.toLowerCase());
                });

                // If no exact matches, use the original list
                const displayItems = filteredItems.length > 0 ? filteredItems : data.items;

                displayItems.forEach(suggestion => {
                    const fullAddress = suggestion.address.label;

                    const option = document.createElement('div');
                    option.className = 'suggestion';
                    option.textContent = fullAddress;

                    // On click, fill the form fields with the selected address
                    option.onclick = () => {
                        document.getElementById('new-address-line1').value = suggestion.address.houseNumber ? `${suggestion.address.houseNumber} ${suggestion.address.street}` : suggestion.address.street;
                        document.getElementById('new-city').value = suggestion.address.city || '';
                        document.getElementById('new-state').value = suggestion.address.stateCode || '';
                        document.getElementById('new-zipcode').value = suggestion.address.postalCode || '';
                        suggestionsDiv.innerHTML = ''; // Clear suggestions after selection
                    };
                    suggestionsDiv.appendChild(option);
                });
            } else {
                suggestionsDiv.innerHTML = '<div class="suggestion">No suggestions found</div>';
                suggestionsDiv.style.display = 'block';  // Ensure the box is visible even with no results
            }
        })
        .catch(error => {
            console.error('Error fetching address suggestions:', error);
            document.getElementById('address-suggestions').innerHTML = '<div class="suggestion">Error fetching suggestions</div>';
            document.getElementById('address-suggestions').style.display = 'block'; // Ensure error message is visible
        });
}

// Function to auto-fill the state based on the ZIP code
document.getElementById('new-zipcode').addEventListener('input', function () {
    const zipcode = this.value;
    if (zipcode.length === 5) {
        const url = `https://geocode.search.hereapi.com/v1/geocode?q=${zipcode}&apikey=${apiKey}`;
        fetch(url)
            .then(response => response.json())
            .then(data => {
                if (data.items && data.items.length > 0) {
                    const address = data.items[0].address;
                    document.getElementById('new-state').value = address.stateCode || '';
                }
            })
            .catch(error => console.error('Error fetching state for ZIP code:', error));
    }
});




</script>
</body>
</html>